<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CloudBuilder: CloudBuilder::CIndexManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="CloudBuilder_logo_128x128.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CloudBuilder
   &#160;<span id="projectnumber">3.0.0</span>
   </div>
   <div id="projectbrief">Making social games is easy !</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_cloud_builder.html">CloudBuilder</a></li><li class="navelem"><a class="el" href="class_cloud_builder_1_1_c_index_manager.html">CIndexManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_cloud_builder_1_1_c_index_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CloudBuilder::CIndexManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="_c_index_manager_8h_source.html">CIndexManager.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4bb377b47af348018049401705da7035"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloud_builder_1_1_c_index_manager.html#a4bb377b47af348018049401705da7035">DeleteObject</a> (<a class="el" href="namespace_cloud_builder.html#aa9298038517f1c9498ac65a0fef1ff93">CResultHandler</a> *aHandler, const <a class="el" href="class_cot_c_helpers_1_1_c_h_j_s_o_n.html">CotCHelpers::CHJSON</a> *aConfiguration)</td></tr>
<tr class="separator:a4bb377b47af348018049401705da7035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ab9b1b01ddba04a0b991407eafc9d60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloud_builder_1_1_c_index_manager.html#a8ab9b1b01ddba04a0b991407eafc9d60">FetchObject</a> (<a class="el" href="namespace_cloud_builder.html#aa9298038517f1c9498ac65a0fef1ff93">CResultHandler</a> *aHandler, const <a class="el" href="class_cot_c_helpers_1_1_c_h_j_s_o_n.html">CotCHelpers::CHJSON</a> *aConfiguration)</td></tr>
<tr class="separator:a8ab9b1b01ddba04a0b991407eafc9d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8deda84f93839175d607500ab50b4c36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloud_builder_1_1_c_index_manager.html#a8deda84f93839175d607500ab50b4c36">IndexObject</a> (<a class="el" href="namespace_cloud_builder.html#aa9298038517f1c9498ac65a0fef1ff93">CResultHandler</a> *aHandler, const <a class="el" href="class_cot_c_helpers_1_1_c_h_j_s_o_n.html">CotCHelpers::CHJSON</a> *aConfiguration)</td></tr>
<tr class="separator:a8deda84f93839175d607500ab50b4c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f2052e8b607a5d29f4877872ecb6d03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloud_builder_1_1_c_index_manager.html#a0f2052e8b607a5d29f4877872ecb6d03">Search</a> (<a class="el" href="namespace_cloud_builder.html#aa9298038517f1c9498ac65a0fef1ff93">CResultHandler</a> *aHandler, const <a class="el" href="class_cot_c_helpers_1_1_c_h_j_s_o_n.html">CotCHelpers::CHJSON</a> *aConfiguration)</td></tr>
<tr class="separator:a0f2052e8b607a5d29f4877872ecb6d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ae87b9b918e3f533b79a3f6f274a133ca"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_cloud_builder_1_1_c_index_manager.html">CIndexManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_cloud_builder_1_1_c_index_manager.html#ae87b9b918e3f533b79a3f6f274a133ca">Instance</a> ()</td></tr>
<tr class="separator:ae87b9b918e3f533b79a3f6f274a133ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a718aba8c045065d846a7cbe9c4bd9090"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a718aba8c045065d846a7cbe9c4bd9090"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>CClan</b></td></tr>
<tr class="separator:a718aba8c045065d846a7cbe9c4bd9090"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcd31db391e15f4e01d9d2d44db7457c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adcd31db391e15f4e01d9d2d44db7457c"></a>
struct&#160;</td><td class="memItemRight" valign="bottom"><b>singleton_holder&lt; CIndexManager &gt;</b></td></tr>
<tr class="separator:adcd31db391e15f4e01d9d2d44db7457c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="class_cloud_builder_1_1_c_index_manager.html">CIndexManager</a> class is used to index and search for objects (e.g. matches, players, …).</p>
<p>The index is global to a domain (or your game if private, as usual), therefore all data is shared by all players.</p>
<p>You can index arbitrary data and then look for it using either the properties or the payload. The properties are indexed, while the payload is only returned in the results.</p>
<p>For instance, if you would like to look for matches using certain criteria, such as only "public" matches involving "team B", you will not store these properties in the matches themselves since they are not indexed, but instead index the matches under a "matches" index, along with these properties, and then perform a query to find them. Note that you may need server-side hooks in order to keep the index updated as the match gets modified (if you are indexing, for instance, the number of players, you will want to override the match-join and match-leave events). Refer to the server documentation for more info. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4bb377b47af348018049401705da7035"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CloudBuilder::CIndexManager::DeleteObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_cloud_builder.html#aa9298038517f1c9498ac65a0fef1ff93">CResultHandler</a> *&#160;</td>
          <td class="paramname"><em>aHandler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_cot_c_helpers_1_1_c_h_j_s_o_n.html">CotCHelpers::CHJSON</a> *&#160;</td>
          <td class="paramname"><em>aConfiguration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes an indexed entry. If you just want to update an entry, simply use IndexObject. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aHandler</td><td>result handler whenever the call finishes (it might also be synchronous) </td></tr>
    <tr><td class="paramname">aConfiguration</td><td>JSON data describing the indexed data to remove<ul>
<li>domain (optional string): the domain on which the action is to be taken (if not passed, the private domain is used).</li>
<li>index (string): the name of the index for scoping.</li>
<li>objectid (string): the object ID (as passed when indexing) to remove. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if noErr, the json passed to the handler may contain the following: { done: 1 } </dd></dl>

</div>
</div>
<a class="anchor" id="a8ab9b1b01ddba04a0b991407eafc9d60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CloudBuilder::CIndexManager::FetchObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_cloud_builder.html#aa9298038517f1c9498ac65a0fef1ff93">CResultHandler</a> *&#160;</td>
          <td class="paramname"><em>aHandler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_cot_c_helpers_1_1_c_h_j_s_o_n.html">CotCHelpers::CHJSON</a> *&#160;</td>
          <td class="paramname"><em>aConfiguration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Fetches a previously indexed object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aHandler</td><td>result handler whenever the call finishes (it might also be synchronous) </td></tr>
    <tr><td class="paramname">aConfiguration</td><td>JSON data describing the indexed data to retrieve<ul>
<li>domain (optional string): the domain on which the action is to be taken (if not passed, the private domain is used).</li>
<li>index (string): the name of the index for scoping.</li>
<li>objectid (string): the object ID (as passed when indexing) to fetch. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if noErr, the json passed to the handler may contain the following: { _index: 'com.clanofthecloud.cloudbuilder.m3nsd85gnqd3', _type: 'matchIndex', _id: '55706319d11b8125d58c8abe', _version: 1, found: true, _source: { "rank": "captain", "age": 28, "world": "utopia", "payload": { "name": "Captain America", "lastPlayed": 1433428652427 } } } </dd></dl>

</div>
</div>
<a class="anchor" id="a8deda84f93839175d607500ab50b4c36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CloudBuilder::CIndexManager::IndexObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_cloud_builder.html#aa9298038517f1c9498ac65a0fef1ff93">CResultHandler</a> *&#160;</td>
          <td class="paramname"><em>aHandler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_cot_c_helpers_1_1_c_h_j_s_o_n.html">CotCHelpers::CHJSON</a> *&#160;</td>
          <td class="paramname"><em>aConfiguration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Indexes a new object.</p>
<p>Use this API to add or update an object in an index. You can have as many indexes as you need: one for gamer properties, one for matches, one for finished matches, etc. It only depends on what you want to search for. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aHandler</td><td>result handler whenever the call finishes (it might also be synchronous) </td></tr>
    <tr><td class="paramname">aConfiguration</td><td>JSON data describing the data to be indexed<ul>
<li>domain (optional string): the domain on which the action is to be taken (if not passed, the private domain is used).</li>
<li>index (string): the name of the index for scoping.</li>
<li>objectid (string): the ID of the object to be indexed. It can be anything; this ID only needs to uniquely identify your document. Therefore, using the match ID to index a match is recommended for instance.</li>
<li>properties (object): a freeform object, whose attributes will be indexed and searchable. These properties are typed! So if 'age' is once passed as an int, it must always be an int, or an error will be thrown upon insertion.</li>
<li>payload (optional object): another freeform object. These properties are attached to the document in the same way as the properties, however those are not indexed (cannot be looked for in a search request). Its content is returned in searches (payload property). </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if noErr, the json passed to the handler may contain the following: { done: 1 } </dd></dl>

</div>
</div>
<a class="anchor" id="ae87b9b918e3f533b79a3f6f274a133ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_cloud_builder_1_1_c_index_manager.html">CIndexManager</a>* CloudBuilder::CIndexManager::Instance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Use this method to obtain a reference to the <a class="el" href="class_cloud_builder_1_1_c_index_manager.html">CIndexManager</a>. </p><dl class="section return"><dt>Returns</dt><dd>the one and only instance of this manager </dd></dl>

</div>
</div>
<a class="anchor" id="a0f2052e8b607a5d29f4877872ecb6d03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CloudBuilder::CIndexManager::Search </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_cloud_builder.html#aa9298038517f1c9498ac65a0fef1ff93">CResultHandler</a> *&#160;</td>
          <td class="paramname"><em>aHandler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_cot_c_helpers_1_1_c_h_j_s_o_n.html">CotCHelpers::CHJSON</a> *&#160;</td>
          <td class="paramname"><em>aConfiguration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Searches the index.</p>
<p>You can search documents in the index with this API. It allows you to make complex queries. See the Elastic documentation to learn the full syntax. It’s easy and quite powerful. <a href="http://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html">http://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">aHandler</td><td>result handler whenever the call finishes (it might also be synchronous) </td></tr>
    <tr><td class="paramname">aConfiguration</td><td>JSON data describing the data to be indexed<ul>
<li>domain (optional string): the domain on which the action is to be taken (if not passed, the private domain is used).</li>
<li>index (string): the name of the index for scoping.</li>
<li>query (string): query query string. Example: "item:silver". See Elastic documentation.</li>
<li>sort (optional array): name of properties (fields) to sort the results with. Example: <code>["item:asc"]</code>.</li>
<li>search: JSON describing what is to search. Can be passed instead of query and sort parameters, and allows to use the full DSL capabilities of ElasticSearch. See <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html</a> for more information.</li>
<li>limit (optional number): the maximum number of results to return. For pagination, defaulting to 30.</li>
<li>skip (optional number): the first element to start from. Use skip=30&amp;limit=30 to fetch the second page. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if noErr, the json passed to the handler may contain the following: { total: 1, max_score: 1, hits: [ { _index: 'com.clanofthecloud.cloudbuilder.m3nsd85gnqd3', _type: 'matchIndex', _id: '55706319d11b8125d58c8abe', _score: 1, _source: { "rank": "captain", "age": 28, "world": "utopia", "payload": { "name": "Captain America", "lastPlayed": 1433428652427 } } } ] } </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Headers/<a class="el" href="_c_index_manager_8h_source.html">CIndexManager.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 28 2015 13:02:13 for CloudBuilder by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
